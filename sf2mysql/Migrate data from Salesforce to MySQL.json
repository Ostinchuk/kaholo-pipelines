{"content":"{\"cells\":[{\"type\":\"devs.PMStartPoint\",\"size\":{\"width\":40,\"height\":39},\"outPorts\":[\" \"],\"inPorts\":[],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\" \"}}}]},\"position\":{\"x\":32,\"y\":-51},\"angle\":0,\"id\":\"3f8daddf-b3f5-44c9-9e9f-4612b8934cc6\",\"z\":1,\"attrs\":{\"rect\":{\"fill\":\"#2d3236\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":368,\"y\":-69},\"angle\":0,\"id\":\"d635b4d4-c851-4ab0-b7df-92afcae57746\",\"z\":2,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"SelectRecords\"},\".p_id\":{\"text\":\"61e5912527ec040032a77daf\"},\"image\":{\"xlink:href\":\"/plugins/SalesForce/logo.png\",\"ref-y\":50},\"text\":{\"text\":\"SelectRecords\"}}},{\"type\":\"devs.Link\",\"source\":{\"id\":\"3f8daddf-b3f5-44c9-9e9f-4612b8934cc6\",\"port\":\"  \"},\"target\":{\"id\":\"3310c919-0280-4454-bf99-597cfaea74e4\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"c8b0d364-05b4-4da7-bc9c-09c3d1985f75\",\"z\":3,\"attrs\":{\".connection\":{\"stroke-width\":3,\"stroke\":\"#87939A\"},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":174,\"y\":-68},\"angle\":0,\"id\":\"3310c919-0280-4454-bf99-597cfaea74e4\",\"z\":6,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"CountRecords\"},\".p_id\":{\"text\":\"61e5912527ec040032a77daf\"},\"image\":{\"xlink:href\":\"/plugins/SalesForce/logo.png\",\"ref-y\":50},\"text\":{\"text\":\"CountRecords\"}}},{\"type\":\"link\",\"source\":{\"id\":\"3310c919-0280-4454-bf99-597cfaea74e4\",\"port\":\"  \"},\"target\":{\"id\":\"d635b4d4-c851-4ab0-b7df-92afcae57746\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"ff3b3ca5-dcf9-421b-8d62-dd46a45321c2\",\"z\":7,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"d635b4d4-c851-4ab0-b7df-92afcae57746\",\"port\":\"  \"},\"target\":{\"id\":\"d635b4d4-c851-4ab0-b7df-92afcae57746\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"ce127b98-3473-41be-801b-371121b8ad29\",\"z\":8,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":559,\"y\":-69},\"angle\":0,\"id\":\"4e51deee-0bfc-44d9-8337-618da2a90806\",\"z\":9,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"DropTable\"},\".p_id\":{\"text\":\"61e590db27ec040032a77a2d\"},\"image\":{\"xlink:href\":\"/plugins/MySQL/MySQL.png\",\"ref-y\":50},\"text\":{\"text\":\"DropTable\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":735,\"y\":-69},\"angle\":0,\"id\":\"0bf283d9-3733-4f9d-9df8-97a21764409e\",\"z\":11,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"CreateTable\"},\".p_id\":{\"text\":\"61e590db27ec040032a77a2d\"},\"image\":{\"xlink:href\":\"/plugins/MySQL/MySQL.png\",\"ref-y\":50},\"text\":{\"text\":\"CreateTable\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":909,\"y\":-70},\"angle\":0,\"id\":\"426749a4-a46c-43fa-81fc-8b866965fe87\",\"z\":13,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"InsertData\"},\".p_id\":{\"text\":\"61e590db27ec040032a77a2d\"},\"image\":{\"xlink:href\":\"/plugins/MySQL/MySQL.png\",\"ref-y\":50},\"text\":{\"text\":\"InsertData\"}}},{\"type\":\"link\",\"source\":{\"id\":\"0bf283d9-3733-4f9d-9df8-97a21764409e\",\"port\":\"  \"},\"target\":{\"id\":\"426749a4-a46c-43fa-81fc-8b866965fe87\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"67acfa09-0089-4854-b862-c085cfd321d9\",\"z\":16,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"d635b4d4-c851-4ab0-b7df-92afcae57746\",\"port\":\"  \"},\"target\":{\"id\":\"d635b4d4-c851-4ab0-b7df-92afcae57746\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"e581b122-f5c2-4fe2-b35b-4702f170d63e\",\"z\":17,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"d635b4d4-c851-4ab0-b7df-92afcae57746\",\"port\":\"  \"},\"target\":{\"id\":\"d635b4d4-c851-4ab0-b7df-92afcae57746\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"8fec6d33-5087-403a-b924-91211fbe7a89\",\"z\":18,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"d635b4d4-c851-4ab0-b7df-92afcae57746\",\"port\":\"  \"},\"target\":{\"id\":\"4e51deee-0bfc-44d9-8337-618da2a90806\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"db126c37-9712-4ba7-82a7-d2a1c6445e41\",\"z\":19,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"4e51deee-0bfc-44d9-8337-618da2a90806\",\"port\":\"  \"},\"target\":{\"id\":\"0bf283d9-3733-4f9d-9df8-97a21764409e\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"9eab435c-7234-4447-a123-6ce29cf6dff3\",\"z\":20,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":1080,\"y\":-70},\"angle\":0,\"id\":\"d6fb8c4e-2d32-45f0-90ac-0f95af975435\",\"z\":22,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Notify\"},\".p_id\":{\"text\":\"61e5912f27ec040032a77e7b\"},\"image\":{\"xlink:href\":\"/plugins/Slack/logo.png\",\"ref-y\":50},\"text\":{\"text\":\"Notify\"}}},{\"type\":\"link\",\"source\":{\"id\":\"426749a4-a46c-43fa-81fc-8b866965fe87\",\"port\":\"  \"},\"target\":{\"id\":\"d6fb8c4e-2d32-45f0-90ac-0f95af975435\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"7c5f6c7b-75c0-4803-81b6-7131ddbde98d\",\"z\":23,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"d635b4d4-c851-4ab0-b7df-92afcae57746\",\"port\":\"  \"},\"target\":{\"id\":\"4e51deee-0bfc-44d9-8337-618da2a90806\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"216f35c9-ed2e-4209-992c-1f2d127f7aeb\",\"z\":24,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}}]}","code":"/*\r\nGlobal variables for keeping and passing data between actions.\r\n*/\r\nconst data = {\r\n    \"total_records\": 0,\r\n    \"offset\": 0,\r\n    \"limit\": kaholo.execution.configuration.sf_limit,\r\n    \"object_fields\": \"\",\r\n    \"insert_rows\": [],\r\n    \"table_columns\": \"\",\r\n    \"slack_message\": \"\"\r\n};\r\nconst COLUMN_MAPPING = kaholo.execution.configuration.column_mapping;\r\n\r\n/*\r\nThis is a post-execution function in \"CountRecords\" action \r\nthat retrieves the number of records for a specified Salesforce object.\r\n*/\r\nfunction countRecords() {\r\n    const totalRecords = actions.CountRecords.result.totalSize;\r\n    data[\"total_records\"] = totalRecords;\r\n}\r\n\r\n/*\r\nThis is a post-execution function in \"CountRecords\" action \r\nthat retrieves an array of SF object fields from the Kaholo configuration object and \r\ncreates a string to paste into SOQL query.\r\n*/\r\nfunction getSalesforceObjectFields() {\r\n    const objectFields = COLUMN_MAPPING.filter(item => item.sf_object_field !== null).map(item => item.sf_object_field).join(\",\");\r\n    data[\"object_fields\"] = objectFields;\r\n}\r\n\r\n/* \r\nThis is a post-execution function in \"SelectRecords\" action \r\nthat prepares an array of records to be inserted into the database.\r\n*/\r\nfunction transformSalesforceRecords() {\r\n    const salesforceRecords = actions.SelectRecords.result.records;\r\n    const objectFields = data[\"object_fields\"].split(\",\");\r\n    for (let record of salesforceRecords){\r\n        let rowItems = [];\r\n        for (let field of objectFields){\r\n            rowItems.push(record[field]);\r\n        }\r\n        let row = `(\"${rowItems.join('\",\"')}\")`;\r\n        data[\"insert_rows\"].push(row);\r\n    }\r\n    data[\"offset\"] += data[\"limit\"]\r\n}\r\n\r\n/*\r\nThis function runs every time before \"DropTable\" action and evaluates if the action should be executed.\r\nThe action will be executed only if the function returns `true`.\r\n*/\r\nfunction dropTable() {\r\n    return data.offset >= data.total_records\r\n}\r\n\r\n/*\r\nThis is a pre-execution function in \"CreateTable\" action that prepares columns to be created in the database.\r\n*/\r\nfunction createTableColumns() {\r\n    const columnNames = COLUMN_MAPPING.filter(item => item.column_name !== \"id\").map(item => item.column_name).join(\", \");\r\n    const columnTypes = COLUMN_MAPPING.map(item => `${item.column_name} ${item.data_type}`).join(\", \");\r\n    data[\"column_types\"] = columnTypes\r\n    data[\"column_names\"] = columnNames\r\n}\r\n\r\n/*\r\nThis is a pre-execution function in \"InsertData\" action that prepares rows to be inserted into a table.\r\n*/\r\nfunction prepareRowsToInsert() {\r\n    const joinedRows = data[\"insert_rows\"].join(\",\")\r\n    data[\"insert_rows\"] = joinedRows\r\n}\r\n\r\n/*\r\nThis is a post-execution function in \"InsertData\" action that prepares a Slack message.\r\n*/\r\nfunction createSlackMessage() {\r\n    const insertedRows = actions.InsertData.result.affectedRows;\r\n    data[\"slack_message\"] = `Inserted ${insertedRows} rows into \"${kaholo.execution.configuration.table_name}\" table.`\r\n}","plugins":[],"processes":[{"id":"61ee7cdb27ec040032ab131a","uuid":"d635b4d4-c851-4ab0-b7df-92afcae57746","codeId":"SelectRecords","name":"","description":"Based on the total number of records, iteratively queries the Salesforce object and constructs an array of records.","mandatory":true,"coordination":"","condition":"data.offset < data.total_records","preRun":"","postRun":" transformSalesforceRecords();","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"","mandatory":true,"method":"executeSoqlQuery","params":[{"value":"kaholo.vault.getValueByKey(\"SALESFORCE_URL\");","code":true,"id":"61e5912527ec040032a77dd2","_id":"61e5912527ec040032a77dd2","viewName":"SalesForce URL","name":"url","required":false,"param":"61e5912527ec040032a77dd2","type":"string"},{"value":"kaholo.vault.getValueByKey(\"SALESFORCE_USERNAME\");","code":true,"id":"61e5912527ec040032a77dd3","_id":"61e5912527ec040032a77dd3","viewName":"Username","name":"username","required":false,"param":"61e5912527ec040032a77dd3","type":"string"},{"value":"SALESFORCE_PASSWORD","code":null,"id":"61e5912527ec040032a77dd4","_id":"61e5912527ec040032a77dd4","viewName":"Password","name":"password","required":false,"param":"61e5912527ec040032a77dd4","type":"vault"},{"value":"SALESFORCE_TOKEN","code":null,"id":"61e5912527ec040032a77dd5","_id":"61e5912527ec040032a77dd5","viewName":"Security Token","name":"token","required":false,"param":"61e5912527ec040032a77dd5","type":"vault"},{"value":"`SELECT ${data.object_fields} FROM ${kaholo.execution.configuration.sf_object} LIMIT ${data.limit} OFFSET ${data.offset}`","code":true,"id":"61e5912527ec040032a77dd6","_id":"61e5912527ec040032a77dd6","viewName":"SOQL Query","name":"query","required":false,"param":"61e5912527ec040032a77dd6","type":"text"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"SalesForce","version":"1.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"61f2a9b827ec040032acc7fe","uuid":"3310c919-0280-4454-bf99-597cfaea74e4","codeId":"CountRecords","name":"","description":"Retrieves the total number of records for a given Salesforce object.","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"countRecords();\ngetSalesforceObjectFields();","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"","mandatory":true,"method":"executeSoqlQuery","params":[{"value":"kaholo.vault.getValueByKey(\"SALESFORCE_URL\");","code":true,"id":"61e5912527ec040032a77dd2","_id":"61e5912527ec040032a77dd2","viewName":"SalesForce URL","name":"url","required":false,"param":"61e5912527ec040032a77dd2","type":"string"},{"value":"kaholo.vault.getValueByKey(\"SALESFORCE_USERNAME\");","code":true,"id":"61e5912527ec040032a77dd3","_id":"61e5912527ec040032a77dd3","viewName":"Username","name":"username","required":false,"param":"61e5912527ec040032a77dd3","type":"string"},{"value":"SALESFORCE_PASSWORD","code":null,"id":"61e5912527ec040032a77dd4","_id":"61e5912527ec040032a77dd4","viewName":"Password","name":"password","required":false,"param":"61e5912527ec040032a77dd4","type":"vault"},{"value":"SALESFORCE_TOKEN","code":null,"id":"61e5912527ec040032a77dd5","_id":"61e5912527ec040032a77dd5","viewName":"Security Token","name":"token","required":false,"param":"61e5912527ec040032a77dd5","type":"vault"},{"value":"`SELECT COUNT() FROM ${kaholo.execution.configuration.sf_object}`","code":true,"id":"61e5912527ec040032a77dd6","_id":"61e5912527ec040032a77dd6","viewName":"SOQL Query","name":"query","required":false,"param":"61e5912527ec040032a77dd6","type":"text"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"SalesForce","version":"1.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"61f3c42627ec040032ad4013","uuid":"4e51deee-0bfc-44d9-8337-618da2a90806","codeId":"DropTable","name":"","description":"Drops a table if it exists. Every time the pipeline runs, a table recreates.","mandatory":false,"coordination":"","condition":"dropTable();","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"","mandatory":false,"method":"executeQuery","params":[{"value":"MYSQL_CONNECTION_STRING","code":null,"id":"61e590db27ec040032a77a2f","_id":"61e590db27ec040032a77a2f","viewName":"Connection String","name":"conStr","required":false,"param":"61e590db27ec040032a77a2f","type":"vault"},{"value":"`DROP TABLE IF EXISTS ${kaholo.execution.configuration.database}.${kaholo.execution.configuration.table_name};`","code":true,"id":"61e590db27ec040032a77a30","_id":"61e590db27ec040032a77a30","viewName":"Query String","name":"query","required":false,"param":"61e590db27ec040032a77a30","type":"text"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"MySQL","version":"3.0.8"},"correlateAgents":null,"numProcessParallel":""},{"id":"61f3c42627ec040032ad4017","uuid":"0bf283d9-3733-4f9d-9df8-97a21764409e","codeId":"CreateTable","name":"","description":"Creates an empty table based on `column_mapping` array from the configuration object.","mandatory":false,"coordination":"","condition":"","preRun":"createTableColumns();","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"","mandatory":false,"method":"executeQuery","params":[{"value":"MYSQL_CONNECTION_STRING","code":null,"id":"61e590db27ec040032a77a2f","_id":"61e590db27ec040032a77a2f","viewName":"Connection String","name":"conStr","required":false,"param":"61e590db27ec040032a77a2f","type":"vault"},{"value":"`CREATE TABLE ${kaholo.execution.configuration.database}.${kaholo.execution.configuration.table_name} (${data.column_types})`","code":true,"id":"61e590db27ec040032a77a30","_id":"61e590db27ec040032a77a30","viewName":"Query String","name":"query","required":false,"param":"61e590db27ec040032a77a30","type":"text"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"MySQL","version":"3.0.8"},"correlateAgents":null,"numProcessParallel":""},{"id":"61f3c42627ec040032ad401b","uuid":"426749a4-a46c-43fa-81fc-8b866965fe87","codeId":"InsertData","name":"","description":"Inserts Salesforce object records into a given table.","mandatory":true,"coordination":"","condition":"","preRun":"prepareRowsToInsert();","postRun":"createSlackMessage();","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"","mandatory":true,"method":"executeQuery","params":[{"value":"MYSQL_CONNECTION_STRING","code":null,"id":"61e590db27ec040032a77a2f","_id":"61e590db27ec040032a77a2f","viewName":"Connection String","name":"conStr","required":false,"param":"61e590db27ec040032a77a2f","type":"vault"},{"value":"`INSERT INTO\n\t${kaholo.execution.configuration.database}.${kaholo.execution.configuration.table_name}(${data.column_names})\nVALUES\n\t${data.insert_rows};`","code":true,"id":"61e590db27ec040032a77a30","_id":"61e590db27ec040032a77a30","viewName":"Query String","name":"query","required":false,"param":"61e590db27ec040032a77a30","type":"text"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"MySQL","version":"3.0.8"},"correlateAgents":null,"numProcessParallel":""},{"id":"61f9115f27ec040032af70e6","uuid":"d6fb8c4e-2d32-45f0-90ac-0f95af975435","codeId":"Notify","name":"","description":"Sends a Slack notification.","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"","mandatory":true,"method":"sendIncomingWebhook","params":[{"value":"SLACK_INCOMING_WEBHOOK","code":null,"id":"61e5912f27ec040032a77e85","_id":"61e5912f27ec040032a77e85","viewName":"Webhook URL","name":"webhookUrl","required":false,"param":"61e5912f27ec040032a77e85","type":"vault"},{"value":"`${data.slack_message}`","code":true,"id":"61e5912f27ec040032a77e86","_id":"61e5912f27ec040032a77e86","viewName":"Message","name":"message","required":false,"param":"61e5912f27ec040032a77e86","type":"text"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"Slack","version":"1.2.2"},"correlateAgents":null,"numProcessParallel":""}],"configurations":[{"name":"SF_MySQL_config","value":"{\n    \"sf_object\": \"Account\",\n    \"sf_limit\": 2000,\n    \"database\": \"kaholo\",\n    \"table_name\": \"account\",\n    \"column_mapping\": [\n        {\"sf_object_field\": null, \"column_name\": \"id\", \"data_type\": \"INT UNSIGNED AUTO_INCREMENT PRIMARY KEY\"},\n        {\"sf_object_field\": \"Id\", \"column_name\": \"sf_id\", \"data_type\": \"VARCHAR(18) NOT NULL\"},\n        {\"sf_object_field\": \"Name\", \"column_name\": \"name\", \"data_type\": \"VARCHAR(255) NOT NULL\"},\n        {\"sf_object_field\": \"Phone\", \"column_name\": \"phone\", \"data_type\": \"VARCHAR(255)\"}\n    ]\n}\n","_id":"6203d6f827ec040032b3ca23"}],"links":[{"uuid":"c8b0d364-05b4-4da7-bc9c-09c3d1985f75","sourceId":"3f8daddf-b3f5-44c9-9e9f-4612b8934cc6","targetId":"3310c919-0280-4454-bf99-597cfaea74e4"},{"uuid":"ff3b3ca5-dcf9-421b-8d62-dd46a45321c2","sourceId":"3310c919-0280-4454-bf99-597cfaea74e4","targetId":"d635b4d4-c851-4ab0-b7df-92afcae57746"},{"uuid":"8fec6d33-5087-403a-b924-91211fbe7a89","sourceId":"d635b4d4-c851-4ab0-b7df-92afcae57746","targetId":"d635b4d4-c851-4ab0-b7df-92afcae57746"},{"uuid":"67acfa09-0089-4854-b862-c085cfd321d9","sourceId":"0bf283d9-3733-4f9d-9df8-97a21764409e","targetId":"426749a4-a46c-43fa-81fc-8b866965fe87"},{"uuid":"db126c37-9712-4ba7-82a7-d2a1c6445e41","sourceId":"d635b4d4-c851-4ab0-b7df-92afcae57746","targetId":"4e51deee-0bfc-44d9-8337-618da2a90806"},{"uuid":"9eab435c-7234-4447-a123-6ce29cf6dff3","sourceId":"4e51deee-0bfc-44d9-8337-618da2a90806","targetId":"0bf283d9-3733-4f9d-9df8-97a21764409e"},{"uuid":"7c5f6c7b-75c0-4803-81b6-7131ddbde98d","sourceId":"426749a4-a46c-43fa-81fc-8b866965fe87","targetId":"d6fb8c4e-2d32-45f0-90ac-0f95af975435"}],"used_plugins":[{"name":"SalesForce","version":"1.0.2"},{"name":"SalesForce","version":"1.0.2"},{"name":"MySQL","version":"3.0.8"},{"name":"MySQL","version":"3.0.8"},{"name":"MySQL","version":"3.0.8"},{"name":"Slack","version":"1.2.2"}]}